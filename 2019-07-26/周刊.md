<style>
.sidebar,
.sidebar-toggle {
    display: none;
}
.markdown-section h1,
.markdown-section h2,
.markdown-section h3 {
    text-align: center;
    padding-bottom: 20px;
    border-bottom: 1px solid #ccc;
}

.markdown-section h3 {
    text-align: left;
    border-bottom: 0;
}
/* 覆盖腾讯企业邮箱的设置 */
.content {
    position: relative !important;
    left: 0;
}

main {
    height: auto !important;
}

img {
    width: 100%;
    margin-bottom: 10px;
}

em {
    font-size: 12px;
}
</style>

<h1 style="text-align: center;">微店技术周刊(总第 25 期)-本期主编-张尚金</h1>

<div class="img-list">
    <img src="https://si.geilicdn.com/img-47300000016c2d6ca9550a211580_313_383.jpg" />
    <p style="text-align: center;font-weight: bold;">历史上的今天都发生了什么科技大事？</p>
    <p style="text-align: center;font-weight: bold;">1963年7月26日，美国发射了世界上第一颗地球同步轨道通迅卫星“辛康2号”</p>
</div>

<!-- <p style="text-align: center;"><a href="http://spaceengine.org/download/spaceengine/">Space Engine</a> 在 Steam 正式上线</p> -->

<h2 style="text-align: center;">关于</h2>

微店技术周刊整理每周有趣有用有料的各类内容，为大家呈现多样的技术世界。

**周刊编辑：@何会会 / @张尚金 / @杨力 / @赵兴 / @刘远洋**

**周刊招募内容作者，主题不限，向团队发出你的声音吧！**

<h2 style="text-align: center;">泛前端</h2>

- [随机不只是 Math.random —— 前端噪声应用](https://juejin.im/post/5d285648f265da1b942176d8?utm_source=gold_browser_extension)(_推荐者: @蒋涛_)

  将图形学领域的噪声应用到前端里面，没想到也能实现很多意想不到的随机动画效果，可以在一些营销、促销活动业务里面尝试

- [HTTP2 打包与资源合并策略，文章一](http://engineering.khanacademy.org/posts/js-packaging-http2.htm)(_推荐者: @龙佳_)

- [HTTP2 打包与资源合并策略，文章二](https://medium.com/@asyncmax/the-right-way-to-bundle-your-assets-for-faster-sites-over-http-2-437c37efe3ff)(_推荐者: @龙佳_)

- [css margin 的一些你可能不知道的细节](https://www.smashingmagazine.com/2019/07/margins-in-css/)(_推荐者: @张尚金_)

- [Sketch 大家肯定都用过，但如何写一个 Sketch 插件呢？](https://www.smashingmagazine.com/2019/07/build-sketch-plugin-javascript-html-css-part-1/)(_推荐者: @张尚金_)

- [javascript 能力如何提升？有效方法之一就是去读优秀库的源码](https://www.smashingmagazine.com/2019/07/javascript-knowledge-reading-source-code/)(_推荐者: @张尚金_)

- [A complete guide to the Node.js event loop - LogRocket Blog](https://blog.logrocket.com/a-complete-guide-to-the-node-js-event-loop/)(_推荐者: @张尚金_)

  对 node.js 中的 event loop 的一次全面介绍

- [A simple guide to help you understand closures in JavaScript](https://medium.com/@prashantramnyc/javascript-closures-simplified-d0d23fa06ba4)(_推荐者: @张尚金_)

  通过更简单的方式来理解 js 中的闭包

- [The 3 Types of Design Patterns All Developers Should Know](https://www.freecodecamp.org/news/the-basic-design-patterns-all-developers-need-to-know/)(_推荐者: @张尚金_)

  设计模式大概有 26 种之多，完全掌握有点难，但这 26 种大概可以归纳为 3 种类型的设计模式，分别就是创建型、结构型、行为型，具体细节可以看文章。

- [Introducing Hooks – React](https://reactjs.org/docs/hooks-intro.html)(_推荐者: @张尚金_)

  react 官方对 hooks 的一次全面介绍，比如 hooks 诞生的动机，如何去解决的等等，值得一看

- [微信小程序运行流程看这篇就够了](https://zhuanlan.zhihu.com/p/36997098)(_推荐者: @刘远洋_)

  小程序运行流程简明介绍

- [开发做了这么多年，你真的了解 JS 工作机制吗](https://www.infoq.cn/article/E2Vvaa-ZfIrMrjrxtdF9)(_推荐者: @刘远洋_)

- [阿里云前端技术周刊](https://juejin.im/post/5d33de54f265da1b9163cfac)(_推荐者: @刘远洋_)

- [双精度浮点数](https://www.wikiwand.com/zh-hans/%E9%9B%99%E7%B2%BE%E5%BA%A6%E6%B5%AE%E9%BB%9E%E6%95%B8)(_推荐者: @刘远洋_)

- [Mobx 思想的实现原理，及与 Redux 对比](https://zhuanlan.zhihu.com/p/25585910)(_推荐者: @刘远洋_)

- [Taro 多端开发实现原理与项目实战](https://juejin.im/book/5b73a131f265da28065fb1cd/section/5b74ec07e51d4566633b2930)(_推荐者: @刘远洋_)

- [中国古诗词库，很赞！](https://github.com/chinese-poetry/chinese-poetry)(_推荐者: @刘远洋_)

- [Proxy 的巧用](https://juejin.im/post/5d2e657ae51d4510b71da69d)(_推荐者: @刘远洋_)

- [21 个 VSCode 快捷键，让代码更快，更有趣 - 终身学习者 ](https://segmentfault.com/a/1190000019821154)(_推荐者: @刘远洋_)

- [为什么视频网站的视频链接地址是 blob？](https://juejin.im/post/5d1ea7a8e51d454fd8057bea)(_推荐者: @刘远洋_)

- [hexo 主题：三段式设计，极简，方便](https://github.com/yelog/hexo-theme-3-hexo)(_推荐者: @刘远洋_)

- [webpack 原理](https://juejin.im/entry/5b0e3eba5188251534379615)(_推荐者: @刘远洋_)

- [VIO 出品 - vChart 图表基础组件](http://vstudio.vdian.net/markdown?id=2295)(_作者: @蒋迪 - 生产力平台)

  vChart 的目标是用最简单的方式作图。

<h2 style="text-align: center;">程序人生</h2>

- [稻盛和夫告别演讲：人生因思维方式而改变](https://mp.weixin.qq.com/s/HHOq6X4cRQBXWLjoQn6V_Q)(_推荐者: @张尚金_)

- [《逃离北上广》各城市薪资水平统计](https://github.com/jiangwei1995910/getAwayBSG)(_推荐者: @罗炜_)

- [程序员养生指南?](https://juejin.im/post/5d357bcbf265da1b7e107526?utm_source=gold_browser_extension)(_推荐者: @罗炜_)

<h2 style="text-align: center;">投稿</h2>

<h3 style="text-align: center;">Vuex源码解析</h3>

<div style="text-align: center;color:#e67e22">@罗炜 - 生产力平台</div>

原文链接：https://github.com/luoway/blog/issues/9

<h2 style="text-align: center;">正文部分</h2>

### Vuex 源码解析

[Vuex 是什么？](https://vuex.vuejs.org/zh/)

### Vuex 使用方式

1. 安装 Vuex

```js
import Vue from "vue";
import Vuex from "vuex";
Vue.use(Vuex);
```

2. 创建 store

```js
const stroe = new Vuex.Store({
  //store 内容
});
```

3. 注入 store

```js
const app = new Vue({
  store
  //vue 实例配置
});
```

接下来按照使用方式的步骤进行分析。

### Vuex.install——安装 Vuex

[src/index.js](https://github.com/luoway/vuex/blob/dev/src/index.js)

```js
import { Store, install } from "./store";
//import ...
export default {
  Store,
  install,
  version: "__VERSION__",
  mapState,
  mapMutations,
  mapGetters,
  mapActions,
  createNamespacedHelpers
};
```

根据[Vue.use()](https://cn.vuejs.org/v2/api/#Vue-use)用法说明，`Vue.use(Vuex)`执行时会调用`Vuex.install()`，内容如下：

[src/store.js](https://github.com/luoway/vuex/blob/dev/src/store.js#L499)

```js
import applyMixin from "./mixin";
//...
let Vue; // bind on install
//...
export function install(_Vue) {
  if (Vue && _Vue === Vue) {
    //省略开发环境提示
    return;
  }
  Vue = _Vue;
  applyMixin(Vue);
}
```

再看`applyMixin(Vue)`

[src/mixin.js](https://github.com/luoway/vuex/blob/dev/src/mixin.js)

```js
export default function(Vue) {
  //省略Vue 1.x、2.x版本区分
  Vue.mixin({ beforeCreate: vuexInit });

  /**
   * Vuex初始化钩子，注入到每个实例的初始化钩子列表。
   */

  function vuexInit() {
    const options = this.$options;
    // store injection
    if (options.store) {
      this.$store =
        typeof options.store === "function" ? options.store() : options.store;
    } else if (options.parent && options.parent.$store) {
      this.$store = options.parent.$store;
    }
  }
}
```

执行`Vue.use(Vuex)`目的就是在每个 Vue 实例初始化时，往`beforeCreate`生命周期中加入`vueInit`函数。

在“注入 store”这一步：

```js
const app = new Vue({
  store
  //vue 实例配置
});
```

执行 Vue 实例的`beforeCreate`生命周期，`vueInit`函数被执行，运行时`this`指向当前 vue 实例上下文，因此`this.$options`指向当前 vue 组件**配置对象**

> 配置对象 是指，`new Vue(options)`时传入的`options`，实例内可以通过`this.$options`访问到

传入的`store`可以被`options.store`访问到，此时执行

```js
this.$store =
  typeof options.store === "function" ? options.store() : options.store;
```

将`options.store`内容赋值给`this.$store`，即完成了`store`的注入。

而`options.store`不存在时，即没有给当前组件配置`store`时，`vueInit`会尝试访问父组件已经注入完成的`$store`，若存在则赋值给当前组件`this.$store`，实现[组件树](https://cn.vuejs.org/v2/guide/components.html#组件的组织)内共享`store`。

至此，Vuex 的安装、注入看完了，接下来具体看创建 Store。

### Vuex.Store(options)——创建 Store

[src/store.js](https://github.com/luoway/vuex/blob/dev/src/store.js#L8)

```js
export class Store {
  constructor() {}

  get state() {}
  set state(v) {}
  commit() {}
  dispatch() {}
  //...
}
```

Vuex.Store 是一个 ES6 class，JS 里是没有 Class 数据类型的，本质上还是个构造函数。

### 实例化过程

......

[查看全部文章内容](https://github.com/luoway/blog/issues/9)
