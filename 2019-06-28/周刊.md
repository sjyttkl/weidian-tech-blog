<style>
.sidebar,
.sidebar-toggle {
    display: none;
}
.markdown-section h1,
.markdown-section h2,
.markdown-section h3 {
    text-align: center;
    padding-bottom: 20px;
    border-bottom: 1px solid #ccc;
}

.markdown-section h3 {
    text-align: left;
    border-bottom: 0;
}
/* 覆盖腾讯企业邮箱的设置 */
.content {
    position: relative !important;
    left: 0;
}

main {
    height: auto !important;
}

img {
    width: 100%;
    margin-bottom: 10px;
}
</style>

<h1 style="text-align: center;">全栈化技术周刊 第 22 期（2019/06/28）</h1>

<div class="img-list">
    <img src="https://si.geilicdn.com/img-20ac0000016b7923e7ac0a21167e_11142_4303.jpg" />
</div>

<!-- <p style="text-align: center;"><a href="http://spaceengine.org/download/spaceengine/">Space Engine</a> 在 Steam 正式上线</p> -->

<h2 style="text-align: center;">关于</h2>

全栈化技术周刊整理每周有趣有用有料的各类内容，为大家呈现多样的技术世界。

**周刊编辑：@何会会 / @张尚金 / @杨力 / @赵兴 / @刘远洋**

**周刊招募内容作者，主题不限，向团队发出你的声音吧！**

<h2 style="text-align: center;">见闻</h2>

1. 彭博社报道，当地时间27日，苹果公司宣布，首席设计师 Jony Ive 将于今年晚些时候离开苹果，成立一家独立的设计公司，苹果将成为这家设计公司的客户。Jony Ive 被认为是苹果公司最重要的人物之一，他是许多苹果公司产品的主要设计者与概念发想者，包括iPod，Mac，iPhone，iPad 等产品，在苹果工作了 20 多年。

2. 华为展厅的 5G 无人矿山的远程挖机，司机师傅将来在空调房里操作，不再遭罪了

   ![image](https://user-images.githubusercontent.com/5757051/60309725-ded76600-9981-11e9-86fb-e8214ed3b881.png)

   视频地址：https://weibo.com/tv/v/HAQZNAvpO?fid=1034:4387835105496857

3. [GitHub 上有哪些一般人也可以用的项目？](https://mp.weixin.qq.com/s?__biz=MzAxOTcxNTIwNQ==&mid=2457915583&idx=1&sn=41a5a9440f994ad4dd566c14adee683c&chksm=8cb6b555bbc13c438ba7f1dae4c574cad147c998732581c54381b3756b46fb37e0350ca1141d&token=678256274&lang=zh_CN#rd)

4. 【Coda 的发展历程】最近几年一批 No Code 工具类的创业公司崛起，让不会编程的脑力劳动者们不用写代码就能搭积木做工具，所谓的 No Code。本文介绍的 Coda 就是这批公司里的佼佼者。

    Coda coda.io 的核心思想是：在线文档像一块画布，在里面可以添加按钮以及各种控件，文档就变得像一个 app。他们 2014 年开始做，闭门造车做了3年才上线；在上线前就融资 $6 千万，估值 $4 个亿。

    https://usefyi.com/coda-history/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website

5. 再次推荐：[前端技术图解](https://github.com/Tnfe/TNFE-Diagram)

    前端的技术点众多，其中不乏抽象且晦涩的知识点，它们用文字无法很直观的表述出来，所以众多开发者对这些知识点的理解都是是而非，如果我们通过图画来展示，就会很容易理解。因此Diagram项目希望开发者能通过这种方式吃透前端技术领域的知识点。

6. Jetbrains，发布了2019年开发者报告，可以去看看有多少人跟你习惯一样；[了解一下](https://www.jetbrains.com/zh-cn/lp/devecosystem-2019/)

7. Apple 作为白金终端用户成员加入 CNCF,对此内容感兴趣的朋友可参考 [Apple Join CNCF](https://www.cncf.io/blog/2019/06/11/apple-joins-cloud-native-computing-foundation-as-platinum-end-user-member/) 的官方说明；

8. github 新功能，使用存储库模板生成新存储库, [github.blog](https://github.blog/2019-06-06-generate-new-repositories-with-repository-templates/)

9. 用 JS 开发跨平台桌面应用，从原理到实践，https://mp.weixin.qq.com/s/4WaUM8iJoEYgrI_HpC5MOQ

10. [《蚂蚁金服的前端框架和工程化实践》](https://github.com/sorrycc/blog/issues/85)

    本文为在 GMTC 2019 上分享的文字稿，介绍蚂蚁金服前端框架是怎么一步一步演变而来，以后对未来的一些规划；
   
   
 
 <h2 style="text-align: center;">分享</h2>
 
 1. 毕业答辩，老师说node不可能写后台怎么办？（nodejs的自我嘲讽）
 [https://www.zhihu.com/question/327657434/answer/704499103](https://www.zhihu.com/question/327657434/answer/704499103)
 
 2. 分享一些Chrome浏览器的前端调试技巧(适用于前端初学和全栈化同学)
 [https://juejin.im/post/5d09c39ee51d4576bc1a0e07](https://juejin.im/post/5d09c39ee51d4576bc1a0e07)
 
 3. 查看hadoop任务跑的sql及任务的输入输出(适用于关心数据使用关心的同学)
 [https://juejin.im/post/5d145d0df265da1b7e104917](https://juejin.im/post/5d145d0df265da1b7e104917)
 
 4. 图解Java垃圾回收机制(真是简单又好理解)
 [https://mp.weixin.qq.com/s/MKkzZ5ZWGh2XeUhOdIEmew](https://mp.weixin.qq.com/s/MKkzZ5ZWGh2XeUhOdIEmew)
 
 5. MySQL性能优化系列分享
 [https://juejin.im/user/59489e04128fe1006a576fbb](https://juejin.im/user/59489e04128fe1006a576fbb)
 
 6. styled-components v5 发布了，带来了更快的构建速度，提升了组件渲染性能，以及更小的包体积
[https://medium.com/styled-components/announcing-styled-components-v5-beast-mode-389747abd987](https://medium.com/styled-components/announcing-styled-components-v5-beast-mode-389747abd987)
 
 7. Web Components入门开发教程
 [https://www.robinwieruch.de/web-components-tutorial/](https://www.robinwieruch.de/web-components-tutorial/)
 
 8. 解读泛搭建体系
 [http://vstudio.vdian.net/markdown?id=2009](http://vstudio.vdian.net/markdown?id=2009)
 
 9. 原生js实现瀑布流效果
 [https://segmentfault.com/a/1190000012621936](https://segmentfault.com/a/1190000012621936)
 
 10. 大白话讲解Hadoop架构原理
 [https://juejin.im/post/5beaf02ce51d457e90196069](https://juejin.im/post/5beaf02ce51d457e90196069)

<h2 style="text-align: center;">投稿</h2>

<h3 style="text-align: center;">CocoaPods 初探 - 诞生背景和安装方法</h3>

<div style="text-align: center;">@孙燕飞</div>

## CocoaPods 是什么

`CocoaPods` - The Swift & Objective C Dependency Manager （Swift 和 ObjC 的依赖管理工具），更准确的说应该是基于 Mac 平台 Xcode 开发环境下的 Swift 和 ObjC 依赖管理工具。它的出现让 iOS 和 Mac 开发者可以更简单的分享自己的代码库，极大的提高了整个苹果开发者社区的活跃度。

## CocoaPods 发展背景

CocoaPods 项目始于 2011 年（0.0.1），在 2013 年开始受到开发者关注（0.26），到目前已经是 iOS 或者 Mac 开发必备工具（1.6.1），那么为什么 CocoaPods 会在 2013 年突然就发展起来？而且还是用 Ruby 而非 ObjC 写的？笔者认为主要有以下三个原因：

- 苹果开发者社区逐渐趋于成熟稳定，需要有一套代码分发工具来推动社区进步，提高社区活跃度
- 从公司发展和管理的角度，项目都趋向于从 MONO-REPO 过渡到 MULTI-REPO 来组织和管理代码
- 脚本语言发展迅猛而且基本都自带一套标准的依赖管理工具如 npm、maven、nuget、pip、composer、SPM 等
- Ruby on Rails 发展逐渐疲软，到 2010 年以后随着移动开发的兴起，很多 Ruby 开发者想找一些新的方向

## CocoaPods 项目组成

CocoaPods 多年的发展历程中，不断引起新的思想，推动自己成为苹果开发者心中的利器。到目前为止，主要由一下四部分组成：

- CocoaPods 工具，包含了各种好用的组件库工具命令，帮助开发者便捷的复用各种组件库，并生成一套集成好的 Xcode 开发环境
- Specs 仓库，存放所有开源库的描述文件 - xx.podspec.json
- Plugins 机制，为了能够更好满足开发者个性化需求，引入插件机制 （CocoaPods-Packager）
- CocoaPods-App，帮助开发者快速编写出优雅、简洁的 Podfile 文件，同时也降低了对于 DSL 维护成本

## CocoaPods 安装卸载

### 1. 普通安装、卸载

**安装最新稳定版**

    [sudo] gem install cocoapods

**安装特定版本**

    [sudo] gem install cocoapods -v 1.6.1

**安装 beta 版本**

    [sudo] gem install cocoapods --pre

**普通卸载**
CocoaPods 安装完之后，在本地的安装、缓存文件由三部分组成：

- CocoaPods 自身依赖的代码库 （ ~这部分代码包含 CocoaPods 的各种操作指令，需要卸载~ ）
- 依赖一些三方的公用代码库 （ ~一般不用处理也不会有影响~ ）
- CocoPods Repo 仓库文件 （ ~在 ~/.cocoapods 目录下一般不用删除~ ）

如下命令可以列出 CocoaPods 自身和依赖的代码库：

    gem list --local | grep cocoapods # 找到 CocoaPods 自身依赖的代码库

一般显示结果如下：

    cocoapods (1.6.1, 1.2.0)
    cocoapods-binary-source-switcher (1.0.5)
    cocoapods-core (1.6.1, 1.2.0)
    cocoapods-deintegrate (1.0.3, 1.0.2)
    cocoapods-downloader (1.2.2)
    cocoapods-plugins (1.0.0)
    cocoapods-search (1.0.0)
    cocoapods-stats (1.1.0, 1.0.0)
    cocoapods-trunk (1.3.1)
    cocoapods-try (1.1.0)

再用 `[sudo] gem uninstall cocoapods-*` 逐一删除上述依赖库，CocoaPods 就卸载完毕了。

### 2.多版本安装、切换、卸载

随着 CocoaPods 版本越来越多，使用的场景也越来越复杂，再加上如果要在团队协作中使用，就会出现很多环境不一致带来的问题，例如：

- 执行 `pod install` 命令时，发现 CocoaPods 版本不一致，导致安装依赖库失败，所以只能卸载 CocoaPods 重装，保持一致
- 公司中可能有多个业务线的项目，不同项目之间采用的版本也不一致，但是可能是共用部分开发者，这该怎么办？
- 很多开源库采用的是比较新的 CocoaPods 版本，自己的 CocoaPods 版本太旧，没法把开源库运行起来，只能盲看代码
- 在移动开发的同时还要开发 Ruby On Rails 应用，不想让 CocoaPods 依赖的库影响到其他应用的环境

上述情况解决的方法是要在本地环境中按需来加载不同版本的 CocoaPods，以达到环境切换的目的。
这里给出三种比较常见的多版本 CocoaPods 安装、切换方式（**只选择一种即可**）。

### **HomeBrew 安装切换**

安装最新版本（例如：1.6.1）

    brew update # 更新 homebrew 仓库
    brew info --github cocoapods # 查看最新版本的描述文件
    brew install cocoapods # 安装 CocoaPods

更新版本

    brew update
    brew upgrade cocoapods

安装指定版本（例如：1.5.3）

    git -C "$(brew --repo homebrew/core)" fetch --unshallow # 全量拉取 homebrew-core 镜像仓库
    git -C "$(brew --repo homebrew/core)" log master -- Formula/cocoapods.rb # 查找 1.5.3 版本提交记录

    # 切换到 CocoaPods 相应版本的分支，并进行安装
    cd "$(brew --repo homebrew/core)"
    git checkout -b cocoapods-1.5.3 the_1.5.3_cocoapods_git_log_hash
    HOMEBREW_NO_AUTO_UPDATE=1 brew install cocoapods
    git checkout master
    git branch -d cocoapods-1.5.3

版本切换（例如：1.6.1 切换到 1.5.3）

    brew switch cocoapods 1.5.3

版本卸载（例如：1.5.3）

    brew switch cocoapods 1.5.3
    brew uninstall cocoapods

### **RVM + Gemset 切换**

安装最新版本（例如：1.6.1）

    rvm gemset create pods-1.6.1
    rvm gemset use pods-1.6.1
    gem install cocoapods -v 1.6.1 # 安装 1.6.1 版本到 pods-1.6.1 的 gemset 工作空间下

安装指定版本（例如：1.5.3）

    rvm gemset create pods-1.5.3
    rvm gemset use pods-1.5.3
    gem install cocoapods -v 1.5.3 # 安装 1.5.3 版本到 pods-1.5.3 的 gemset 工作空间下

版本切换

    rvm gemset use pods-1.6.1 # 切换到 1.6.1 版本的 CocoaPods

    rvm gemset use pods-1.5.3 # 切换到 1.5.3 版本的 CocoaPods

    rvm use 2.5.3@pods-1.6.1 --default # 指定 ruby 2.5.3 下的 pods-1.6.1 为默认工作空间，即默认为 1.6.1

版本卸载（例如：1.6.1）

    rvm gemset delete pods-1.6.1 # 卸载 1.6.1 版本

### **RVM +Bundler+Gemfile 切换（推荐）**

上述两种方式虽然能够实现安装和切换环境，但还是针对全局环境的统一切换，但在某些场景下是需要按照工程来配置 CocoaPods 版本的，如果每次进入到一个工程都需要再单独运行一条命令切换环境，虽然可以实现版本切换但并不是特别完美的方案，勤劳的 Ruby 开发者找到了完美的解决方案：就是采用 Bundler 管理 Gem 的方式来安装、切换 CocoaPods。

工程 A 需要 1.6.1 版本 CocoaPods：

    bundle init # 在 A 工程的 Xcode 根目录下，初始化 Gemfile 文件

编辑 Gemfile 文件，指定 1.6.1 版本的 CocoaPods ：

    source "<https://rubygems.org>"

    gem "cocoapods", "1.6.1" # 指定 CocoaPods 版本 1.6.1
    gem "cocoapods-xxx", "x.x.x" # 指定其他依赖的 Gem 版本

用 Bundler 安装，生成 Gemfile.lock，这个 lock 文件就为该工程锁定了需要的 CocoaPods 版本

    bundle install # 在 A 工程的根目录执行该命令

切换到工程 B 需要 1.5.3 版本 CocoaPods：

    bundle init # 在 B 工程的 Xcode 根目录下，初始化 Gemfile 文件

编辑 Gemfile 文件，指定 1.5.3 版本的 CocoaPods ：

    source "<https://rubygems.org>"

    gem "cocoapods", "1.5.3" # 指定 CocoaPods 版本 1.5.3
    gem "cocoapods-xxx", "x.x.x" # 指定其他依赖的 Gem 版本

用 Bundler 安装，生成 Gemfile.lock

    bundle install # 在 B 工程的根目录执行该命令

通过上述操作 A 工程和 B 工程便可以按需切换 CocoaPods 版本，不再受系统整体环境的影响。

## 总结

**本节讲解了如下三部分内容：**

- CocoaPods 是什么
- CocoaPods 历史、以及发展历程
- CocoaPods 组成
- CocoaPods 安装、卸载、版本切换

## 参考文章

- [REPO 风格之争：MONO VS MULTI - 知乎](https://zhuanlan.zhihu.com/p/31289463)
- [Using macOS Homebrew to Install a Specific Version | Nick Galbreath](https://www.client9.com/using-macos-homebrew-to-install-a-specific-version/)
- [homebrew - Brew List and Install Specific Versions of Formula - Stack Overflow](https://stackoverflow.com/questions/53837861/brew-list-and-install-specific-versions-of-formula)
- [RVM官方网站](https://rvm.io/)